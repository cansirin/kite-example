{"version":3,"sources":["../../../src/server/websocket/index.js"],"names":["Server","constructor","options","hostname","server","port","host","on","connection","emit","getAddress","close","scheme","secureScheme"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;;;AAEA,MAAMA,MAAN,2BAA6B;AAC3BC,cAAYC,OAAZ,EAAqB;AACnB;AACA,SAAKA,OAAL,GAAeA,WAAW,EAA1B;AACA,SAAKA,OAAL,CAAaC,QAAb,GAAwB,KAAKD,OAAL,CAAaC,QAAb,IAAyB,SAAjD;AACA,SAAKC,MAAL,GAAc,eAAoB;AAChCC,YAAMH,QAAQG,IADkB;AAEhCC,YAAMJ,QAAQC;AAFkB,KAApB,CAAd;AAIA,SAAKC,MAAL,CAAYG,EAAZ,CAAe,YAAf,EAA6BC,cAAc;AACzC,aAAO,KAAKC,IAAL,CAAU,YAAV,EAAwB,sBAAYD,UAAZ,CAAxB,CAAP;AACD,KAFD;AAGD;;AAEDE,eAAa;AACX,WAAQ,GAAE,KAAKN,MAAL,CAAYF,OAAZ,CAAoBI,IAAK,IAAG,KAAKF,MAAL,CAAYF,OAAZ,CAAoBG,IAAK,EAA/D;AACD;;AAEDM,UAAQ;AACN,SAAKP,MAAL,IAAe,KAAKA,MAAL,CAAYO,KAAZ,EAAf;AACD;AApB0B;;AAuB7BX,OAAOY,MAAP,GAAgB,IAAhB;AACAZ,OAAOa,YAAP,GAAsB,KAAtB;;kBAEeb,M","file":"index.js","sourcesContent":["import { Server as WebSocketServer } from 'ws'\nimport Emitter from '../../kite/emitter'\nimport Session from './session'\n\nclass Server extends Emitter {\n  constructor(options) {\n    super()\n    this.options = options || {}\n    this.options.hostname = this.options.hostname || '0.0.0.0'\n    this.server = new WebSocketServer({\n      port: options.port,\n      host: options.hostname,\n    })\n    this.server.on('connection', connection => {\n      return this.emit('connection', new Session(connection))\n    })\n  }\n\n  getAddress() {\n    return `${this.server.options.host}:${this.server.options.port}`\n  }\n\n  close() {\n    this.server && this.server.close()\n  }\n}\n\nServer.scheme = 'ws'\nServer.secureScheme = 'wws'\n\nexport default Server\n"]}