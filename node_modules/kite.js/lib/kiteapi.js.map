{"version":3,"sources":["../src/kiteapi.js"],"names":["isFunction","thing","KiteApi","constructor","auth","methods","setMethods","Object","assign","methodKeys","keys","hasMethod","method","includes","reduce","acc","methodName","setMethod","fn","func","undefined","Error","mustAuth","withArgs","authentication","responseCallback","kite","args","Array","isArray","shouldAuthenticate"],"mappings":";;;;;;AAAA;;AAEA,MAAMA,aAAaC,SAAS,OAAOA,KAAP,KAAiB,UAA7C;;AAEe,MAAMC,OAAN,CAAc;AAC3BC,cAAY,EAAEC,IAAF,EAAQC,OAAR,EAAZ,EAA+B;AAC7B,SAAKD,IAAL,GAAYA,IAAZ;AACA,SAAKC,OAAL,GAAe,KAAKC,UAAL,CAAgBC,OAAOC,MAAP,CAAc,EAAd,yBAA8BH,OAA9B,CAAhB,CAAf;AACA,SAAKI,UAAL,GAAkBF,OAAOG,IAAP,CAAY,KAAKL,OAAjB,CAAlB;AACD;;AAEDM,YAAUC,MAAV,EAAkB;AAChB,QAAI,CAACA,MAAD,IAAWA,WAAW,EAA1B,EAA8B,OAAO,KAAP;AAC9B,WAAO,KAAKH,UAAL,CAAgBI,QAAhB,CAAyBD,MAAzB,CAAP;AACD;;AAEDN,aAAWD,OAAX,EAAoB;AAClB,WAAOE,OAAOG,IAAP,CAAYL,OAAZ,EAAqBS,MAArB,CAA4B,CAACC,GAAD,EAAMC,UAAN,KAAqB;AACtD,aAAOT,OAAOC,MAAP,CAAcO,GAAd,EAAmB,KAAKE,SAAL,CAAeD,UAAf,EAA2BX,QAAQW,UAAR,CAA3B,CAAnB,CAAP;AACD,KAFM,EAEJ,EAFI,CAAP;AAGD;;AAEDC,YAAUD,UAAV,EAAsBE,EAAtB,EAA0B;AACxB,QAAId,IAAJ,EAAUe,IAAV;;AAEA,QAAInB,WAAWkB,EAAX,CAAJ,EAAoB;AAClBC,aAAOD,EAAP;AACAd,aAAOgB,SAAP;AACD,KAHD,MAGO,IAAIpB,WAAWkB,GAAGC,IAAd,CAAJ,EAAyB;AAC9BA,aAAOD,GAAGC,IAAV;AACAf,aAAOc,GAAGd,IAAV;AACD,KAHM,MAGA;AACL,YAAM,IAAIiB,KAAJ,CACH,+DADG,CAAN;AAGD;;AAEDjB,WAAOA,QAAQ,IAAR,GAAeA,IAAf,GAAsB,KAAKA,IAAlC;AACAe,SAAKG,QAAL,GAAgBlB,QAAQ,IAAR,GAAeA,IAAf,GAAsB,IAAtC;;AAEA,WAAO;AACL,OAACY,UAAD,GAAc,CAAC,EAAEO,QAAF,EAAYC,cAAZ,EAA4BC,gBAA5B,EAA8CC,IAA9C,EAAD,KAA0D;AACtE,cAAMC,OAAOC,MAAMC,OAAN,CAAcN,QAAd,IAA0BA,QAA1B,GAAqC,CAACA,QAAD,CAAlD;AACAJ,aAAK,GAAGQ,IAAR,EAAcF,gBAAd,EAAgC,EAAEC,IAAF,EAAQF,cAAR,EAAhC;AACD;AAJI,KAAP;AAMD;;AAEDM,qBAAmBlB,MAAnB,EAA2B;AACzB,WAAO,KAAKP,OAAL,CAAaO,MAAb,KAAwB,KAAKP,OAAL,CAAaO,MAAb,EAAqBU,QAApD;AACD;AA9C0B;kBAARpB,O","file":"kiteapi.js","sourcesContent":["import { DefaultApi } from './constants'\n\nconst isFunction = thing => typeof thing === 'function'\n\nexport default class KiteApi {\n  constructor({ auth, methods }) {\n    this.auth = auth\n    this.methods = this.setMethods(Object.assign({}, DefaultApi, methods))\n    this.methodKeys = Object.keys(this.methods)\n  }\n\n  hasMethod(method) {\n    if (!method || method === '') return false\n    return this.methodKeys.includes(method)\n  }\n\n  setMethods(methods) {\n    return Object.keys(methods).reduce((acc, methodName) => {\n      return Object.assign(acc, this.setMethod(methodName, methods[methodName]))\n    }, {})\n  }\n\n  setMethod(methodName, fn) {\n    let auth, func\n\n    if (isFunction(fn)) {\n      func = fn\n      auth = undefined\n    } else if (isFunction(fn.func)) {\n      func = fn.func\n      auth = fn.auth\n    } else {\n      throw new Error(\n        `Argument must be a function or an object with a func property`\n      )\n    }\n\n    auth = auth != null ? auth : this.auth\n    func.mustAuth = auth != null ? auth : true\n\n    return {\n      [methodName]: ({ withArgs, authentication, responseCallback, kite }) => {\n        const args = Array.isArray(withArgs) ? withArgs : [withArgs]\n        func(...args, responseCallback, { kite, authentication })\n      },\n    }\n  }\n\n  shouldAuthenticate(method) {\n    return this.methods[method] && this.methods[method].mustAuth\n  }\n}\n"]}